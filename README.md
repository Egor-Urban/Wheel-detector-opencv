# Система обнаружения колёс

Разработчик: Urban Egor
Версия: 3.5.46 b

Система для автоматического обнаружения и подсчёта колёс на видео или с камеры в реальном времени. Поддерживает два режима работы: обработка видеофайла и поток с камеры.

### Возможности:
- Обнаружение и подсчёт колёс на видеофайле.
- Обработка видеопотока с камеры в реальном времени.
- Поддержка сохранения обработанного видео.
- Визуализация обнаруженных колёс с отрисовкой на кадре.
- Режим отладки для отображения всех детектированных окружностей (только для камеры).
- Логирование всех событий и статистики обработки в файл logs/YYYY-MM-DD.log.

### Установка:
1. Клонировать репозиторий:
```git clone https://github.com/Egor-Urban/Wheel-detector-opencv.git```
```cd Wheel-detector-opencv```

1. Установить зависимости:
```pip install -r requirements.txt```

Требуемые библиотеки:
- OpenCV (cv2)
- NumPy (numpy)

### Структура проекта:

- main.py               # Точка входа, главное меню
- WheelCounterApp.py    # Основной класс приложения
- FrameProcessor.py     # Обработка кадров и детекция кругов
- WheelFilter.py        # Фильтрация обнаруженных окружностей, проверка на колёса
- assets/               # Ресурсы проекта (шаблон колеса, пример видео)
  - wheel977.png
  - cars_passing_input.mp4
- logs/                 # Логи работы программы
- README.md             # ты здесь

### Использование:

Запуск программы:
```python main.py```

При запуске откроется меню:
```
  СИСТЕМА ОБНАРУЖЕНИЯ КОЛЁС
==================================
Выберите режим работы:
  1 - Обработка видеофайла
  2 - Обработка видео с камеры
  0 - Выход
```
1. Обработка видеофайла
- Введите путь к видео (по умолчанию assets/cars_passing_input.mp4).
- Введите путь для сохранения результата (по умолчанию assets/outputcar.avi).
- Нажмите q для остановки обработки.

1. Обработка с камеры
- Введите ID камеры (по умолчанию 0).
- Можно выбрать сохранение видео (y/n).
- Режим отладки: нажмите D для отображения всех обнаруженных окружностей.
- Нажмите q для остановки обработки.

### Настройки фильтрации колёс:

Параметры адаптируются в зависимости от режима:

Параметр          | Видеофайл       | Камера
------------------|----------------|----------------
Радиус колеса     | 53–75 px       | 20–150 px
Вертикальная зона | 500–560 px     | весь кадр
Использование шаблона | Да (wheel977.png) | Нет
Порог SSD         | 150000         | -

### Логирование:

Все действия, ошибки и статистика сохраняются в logs/YYYY-MM-DD.log:
- Количество обработанных кадров
- Количество найденных колёс
- Среднее число колёс на кадр

### Примечания:
- Рекомендуется использовать видео с хорошим контрастом колёс и фона.
- Для камеры необходимо хорошее освещение для корректной детекции.
- Режим отладки позволяет визуально оценить работу HoughCircles и фильтрации.

### Лицензия 
MIT